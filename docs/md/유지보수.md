# 유지보수 쿼리

## 이미지 없는 장소 데이터 정리

`images`와 `place_images` 컬럼이 모두 비어 있거나(`[]`) `NULL`인 데이터를 확인하고 삭제하는 쿼리입니다.

### 1. 대상 데이터 갯수 조회
```sql
SELECT count(*) 
FROM public.tbl_place 
WHERE 
    (images IS NULL OR array_length(images, 1) IS NULL)
    AND 
    (place_images IS NULL OR array_length(place_images, 1) IS NULL);
```

### 2. 대상 데이터 삭제
```sql
DELETE FROM public.tbl_place 
WHERE 
    (images IS NULL OR array_length(images, 1) IS NULL)
    AND 
    (place_images IS NULL OR array_length(place_images, 1) IS NULL);
```

---

### 실행 방법 (터미널)
```bash
psql "postgresql://postgres.xyqpggpilgcdsawuvpzn:ZNDqDunnaydr0aFQ@aws-0-ap-northeast-2.pooler.supabase.com:5432/postgres"
```
